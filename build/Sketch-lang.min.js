function printNode(e){console.log(e)}function push(e){codeStore=codeStore.concat(e),console.log(codeStore)}function walkProgram(e){var t=e.arguments;walk(t)}function walkAssign(e){e.arguments[0],e.arguments[1]}function walkFunction(e){var t=e.arguments[0],r=(e.arguments[1],e.arguments[2]);e.arguments[3];console.log(e.type+" "+t+" returns "+r)}function walkVariableDeclAssign(e){e.arguments[0],e.arguments[1],e.arguments[2]}function walkVariableDecl(e){e.arguments[0],e.arguments[1]}function walkIf(e){e.arguments[0],e.arguments[1]}function walkIfElse(e){e.arguments[0],e.arguments[1],e.arguments[2]}function walkWhile(e){e.arguments[0],e.arguments[1];walkDoWhile(e)}function walkDoWhile(e){var t=(e.arguments[0],e.arguments[1]);walk(t)}function walkFor(e){e.arguments[0],e.arguments[1],e.arguments[2],e.arguments[3]}function walkMathematical(e,t){var r=e.arguments[0],n=e.arguments[1];isNaN(r)?walk(r):push([OPCODES.LOADC,parseFloat(r)]),isNaN(n)?walk(n):push([OPCODES.LOADC,parseFloat(n)]),push(t)}function walkAddition(e){walkMathematical(e,OPCODES.IADD)}function walkSubtraction(e){walkMathematical(e,OPCODES.ISUB)}function walkMultiplication(e){walkMathematical(e,OPCODES.IMUL)}function walkDivision(e){walkMathematical(e,OPCODES.IDIV)}function walkModulo(e){walkMathematical(e,OPCODES.IMOD)}function walkAddAssign(e){e.type="addition",walkAssign(e.arguments[0],walkAdd(e))}function walkSubAssign(e){e.type="subtraction",walkAssign(e.arguments[0],walkSubtraction(e))}function walkMultiAssign(e){e.type="multiplication",walkAssign(e.arguments[0],walkMultiply(e))}function walkDivAssign(e){e.type="division",walkAssign(e.arguments[0],walkDivide(e))}function walkModAssign(e){e.type="modulo",walkAssign(e.arguments[0],walkModulo(e))}function walkIncrement(e){e.arguments[0]}function walkDecrement(e){e.arguments[0]}function walkAnd(e){e.arguments[0],e.arguments[1]}function walkOr(e){e.arguments[0],e.arguments[1]}function walkNotEqual(e){e.arguments[0],e.arguments[1]}function walkLessThanOrEqual(e){e.arguments[0],e.arguments[1]}function walkLessThan(e){e.arguments[0],e.arguments[1]}function walkGreaterThan(e){e.arguments[0],e.arguments[1]}function walkGreaterThanOrEqual(e){e.arguments[0],e.arguments[1]}function walkEquality(e){e.arguments[0],e.arguments[1]}function walkUndefined(){undef=new Object,undef.type="undefined",undef.arguments="---",console.log("Undefined node"),printNode(undef)}function walkUnknown(e){unknown=new Object,unknown.type="unknown",unknown.arguments="("+e.toString()+")",console.log("Unwalkable node"),printNode(unknown)}function walk(e){switch(printNode(e),treeDepth+=1,e.type){case"program":walkProgram(e);break;case"assign":walkAssign(e);break;case"function":walkFunction(e);break;case"variable-decl-assign":walkVariableDeclAssign(e);break;case"variable-decl":walkVariableDecl(e);break;case"if":walkIf(e);break;case"if-else":walkIfElse(e);break;case"while":walkWhile(e);break;case"do-while":walkDoWhile(e);break;case"for":walkFor(e);break;case"addition":walkAddition(e);break;case"subtraction":walkSubtraction(e);break;case"multiplication":walkMultiplication(e);break;case"division":walkDivision(e);break;case"modulo":walkModulo(e);break;case"add-assign":walkAddAssign(e);break;case"sub-assign":walkSubAssign(e);break;case"multi-assign":walkMultiAssign(e);break;case"div-assign":walkDivAssign(e);break;case"mod-assign":walkModAssign(e);break;case"increment":walkIncrement(e);break;case"decrement":walkDecrement(e);break;case"and":walkAnd(e);break;case"or":walkOr(e);break;case"equality":walkEquality(e);break;case"less-than":walkLessThan(e);break;case"greater-than":walkGreaterThan(e);break;case"not-equal":walkNotEqual(e);break;case"less-than-or-equal":walkLessThanOrEqual(e);break;case"greater-than-or-equal":walkGreaterThanOrEqual(e);break;case void 0:treeDepth-=1,walkUndefined(),treeDepth+=1;break;default:treeDepth-=1,walkUnknown(e),treeDepth+=1}treeDepth-=1,printNode(e)}function earcut(e,t){var r=filterPoints(linkedList(e[0],!0)),n=t?{vertices:[],indices:[]}:[];if(!r)return n;var a,s,i,o,c,l,h,u,d,f=80;for(d=0;f>=0&&d<e.length;d++)f-=e[d].length;if(0>f){a=r.next,s=o=a.p[0],i=c=a.p[1];do l=a.p[0],h=a.p[1],s>l&&(s=l),i>h&&(i=h),l>o&&(o=l),h>c&&(c=h),a=a.next;while(a!==r);u=Math.max(o-s,c-i)}return e.length>1&&(r=eliminateHoles(e,r)),earcutLinked(r,n,s,i,u),n}function linkedList(e,t){var r,n,a,s,i,o=0,c=e.length;for(r=0,n=c-1;c>r;n=r++)a=e[r],s=e[n],o+=(s[0]-a[0])*(a[1]+s[1]);if(t===o>0)for(r=0;c>r;r++)i=insertNode(e[r],i);else for(r=c-1;r>=0;r--)i=insertNode(e[r],i);return i}function filterPoints(e,t){t||(t=e);var r,n=e;do if(r=!1,equals(n.p,n.next.p)||0===orient(n.prev.p,n.p,n.next.p)){if(n.prev.next=n.next,n.next.prev=n.prev,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ),n=t=n.prev,n===n.next)return null;r=!0}else n=n.next;while(r||n!==t);return t}function earcutLinked(e,t,r,n,a,s){if(e){var i=void 0!==t.vertices;s||void 0===r||indexCurve(e,r,n,a);for(var o,c,l=e;e.prev!==e.next;)if(o=e.prev,c=e.next,isEar(e,r,n,a))i?(addIndexedVertex(t,o),addIndexedVertex(t,e),addIndexedVertex(t,c)):(t.push(o.p),t.push(e.p),t.push(c.p)),c.prev=o,o.next=c,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ),e=c.next,l=c.next;else if(e=c,e===l){s?1===s?(e=cureLocalIntersections(e,t),earcutLinked(e,t,r,n,a,2)):2===s&&splitEarcut(e,t,r,n,a):earcutLinked(filterPoints(e),t,r,n,a,1);break}}}function addIndexedVertex(e,t){t.source&&(t=t.source);var r=t.index;if(null===r){var n=t.p.length,a=e.vertices;t.index=r=a.length/n;for(var s=0;n>s;s++)a.push(t.p[s])}e.indices.push(r)}function isEar(e,t,r,n){var a=e.prev.p,s=e.p,i=e.next.p,o=a[0],c=s[0],l=i[0],h=a[1],u=s[1],d=i[1],f=o*u-h*c,p=o*d-h*l,g=l*u-d*c,m=f-p-g;if(0>=m)return!1;var v,y,k,S,P,b,E,x=d-h,O=o-l,w=h-u,A=c-o;if(void 0!==t){var _=c>o?l>o?o:l:l>c?c:l,L=u>h?d>h?h:d:d>u?u:d,N=o>c?o>l?o:l:c>l?c:l,M=h>u?h>d?h:d:u>d?u:d,D=zOrder(_,L,t,r,n),I=zOrder(N,M,t,r,n);for(E=e.nextZ;E&&E.z<=I;)if(v=E.p,E=E.nextZ,v!==a&&v!==i&&(y=v[0],k=v[1],S=x*y+O*k-p,S>=0&&(P=w*y+A*k+f,P>=0&&(b=m-S-P,b>=0&&(S&&P||S&&b||P&&b)))))return!1;for(E=e.prevZ;E&&E.z>=D;)if(v=E.p,E=E.prevZ,v!==a&&v!==i&&(y=v[0],k=v[1],S=x*y+O*k-p,S>=0&&(P=w*y+A*k+f,P>=0&&(b=m-S-P,b>=0&&(S&&P||S&&b||P&&b)))))return!1}else for(E=e.next.next;E!==e.prev;)if(v=E.p,E=E.next,y=v[0],k=v[1],S=x*y+O*k-p,S>=0&&(P=w*y+A*k+f,P>=0&&(b=m-S-P,b>=0&&(S&&P||S&&b||P&&b))))return!1;return!0}function cureLocalIntersections(e,t){var r=!!t.vertices,n=e;do{var a=n.prev,s=n.next.next;if(a.p!==s.p&&intersects(a.p,n.p,n.next.p,s.p)&&locallyInside(a,s)&&locallyInside(s,a)){r?(addIndexedVertex(t,a),addIndexedVertex(t,n),addIndexedVertex(t,s)):(t.push(a.p),t.push(n.p),t.push(s.p)),a.next=s,s.prev=a;var i=n.prevZ,o=n.nextZ&&n.nextZ.nextZ;i&&(i.nextZ=o),o&&(o.prevZ=i),n=e=s}n=n.next}while(n!==e);return n}function splitEarcut(e,t,r,n,a){var s=e;do{for(var i=s.next.next;i!==s.prev;){if(s.p!==i.p&&isValidDiagonal(s,i)){var o=splitPolygon(s,i);return s=filterPoints(s,s.next),o=filterPoints(o,o.next),earcutLinked(s,t,r,n,a),void earcutLinked(o,t,r,n,a)}i=i.next}s=s.next}while(s!==e)}function eliminateHoles(e,t){for(var r=e.length,n=[],a=1;r>a;a++){var s=filterPoints(linkedList(e[a],!1));s&&n.push(getLeftmost(s))}for(n.sort(compareX),a=0;a<n.length;a++)eliminateHole(n[a],t),t=filterPoints(t,t.next);return t}function eliminateHole(e,t){if(t=findHoleBridge(e,t)){var r=splitPolygon(t,e);filterPoints(r,r.next)}}function findHoleBridge(e,t){var r,n,a,s=t,i=e.p,o=i[0],c=i[1],l=-(1/0);do{if(n=s.p,a=s.next.p,c<=n[1]&&c>=a[1]){var h=n[0]+(c-n[1])*(a[0]-n[0])/(a[1]-n[1]);o>=h&&h>l&&(l=h,r=n[0]<a[0]?s:s.next)}s=s.next}while(s!==t);if(!r)return null;var u,d,f,p,g,m,v=r.p[0],y=r.p[1],k=o*y-c*v,S=o*c-c*l,P=c-c,b=o-l,E=c-y,x=v-o,O=k-S-(l*y-c*v),w=0>=O?-1:1,A=r,_=1/0;for(s=r.next;s!==A;)u=s.p[0],d=s.p[1],f=o-u,f>=0&&u>=v&&(p=(P*u+b*d-S)*w,p>=0&&(g=(E*u+x*d+k)*w,g>=0&&O*w-p-g>=0&&(m=Math.abs(c-d)/f,_>m&&locallyInside(s,e)&&(r=s,_=m)))),s=s.next;return r}function indexCurve(e,t,r,n){var a=e;do null===a.z&&(a.z=zOrder(a.p[0],a.p[1],t,r,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,sortLinked(a)}function sortLinked(e){for(var t,r,n,a,s,i,o,c,l=1;;){for(r=e,e=null,s=null,i=0;r;){for(i++,n=r,o=0,t=0;l>t&&(o++,n=n.nextZ,n);t++);for(c=l;o>0||c>0&&n;)0===o?(a=n,n=n.nextZ,c--):0!==c&&n?r.z<=n.z?(a=r,r=r.nextZ,o--):(a=n,n=n.nextZ,c--):(a=r,r=r.nextZ,o--),s?s.nextZ=a:e=a,a.prevZ=s,s=a;r=n}if(s.nextZ=null,1>=i)return e;l*=2}}function zOrder(e,t,r,n,a){return e=1e3*(e-r)/a,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=1e3*(t-n)/a,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function getLeftmost(e){var t=e,r=e;do t.p[0]<r.p[0]&&(r=t),t=t.next;while(t!==e);return r}function isValidDiagonal(e,t){return!intersectsPolygon(e,e.p,t.p)&&locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,e.p,t.p)}function orient(e,t,r){var n=(t[1]-e[1])*(r[0]-t[0])-(t[0]-e[0])*(r[1]-t[1]);return n>0?1:0>n?-1:0}function equals(e,t){return e[0]===t[0]&&e[1]===t[1]}function intersects(e,t,r,n){return orient(e,t,r)!==orient(e,t,n)&&orient(r,n,e)!==orient(r,n,t)}function intersectsPolygon(e,t,r){var n=e;do{var a=n.p,s=n.next.p;if(a!==t&&s!==t&&a!==r&&s!==r&&intersects(a,s,t,r))return!0;n=n.next}while(n!==e);return!1}function locallyInside(e,t){return-1===orient(e.prev.p,e.p,e.next.p)?-1!==orient(e.p,t.p,e.next.p)&&-1!==orient(e.p,e.prev.p,t.p):-1===orient(e.p,t.p,e.prev.p)||-1===orient(e.p,e.next.p,t.p)}function middleInside(e,t,r){var n=e,a=!1,s=(t[0]+r[0])/2,i=(t[1]+r[1])/2;do{var o=n.p,c=n.next.p;o[1]>i!=c[1]>i&&s<(c[0]-o[0])*(i-o[1])/(c[1]-o[1])+o[0]&&(a=!a),n=n.next}while(n!==e);return a}function compareX(e,t){return e.p[0]-t.p[0]}function splitPolygon(e,t){var r=new Node(e.p),n=new Node(t.p),a=e.next,s=t.prev;return r.source=e,n.source=t,e.next=t,t.prev=e,r.next=a,a.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function insertNode(e,t){var r=new Node(e);return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function Node(e){this.p=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.source=null,this.index=null}var Sketch=Sketch||{};Sketch.createSketch=function(e){var t=new Sketch.Driver(e);return t.addShaderURL("shaders/sketch-default.json"),t},Sketch.Driver=function(e){this.readyLock=0,this.canvas=e,this.context=e.getContext("webgl",{preserveDrawingBuffer:!0}),this.codeStore=[],this.constantPool=[],this.parser=sketchParse,this.codeGen=new Sketch.SketchGen,this.shaderManager=new Palette.Manager(this.context),this.vm=null},Sketch.Driver.prototype={addShader:function(e){this.readyLock++,this.addShaderInternal(e)},addShaderURL:function(e){this.readyLock++;var t=this,r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=function(){t.addShaderInternal(r.responseText)},r.send()},addShaderInternal:function(e){this.shaderManager.addShader(e),this.readyLock--},compile:function(e){if(this.readyLock>0)return alert("Sketch driver is still loading shaders - be patient! If it's been excessively long then you may have tried to add a malformed shader."),!1;codeStore=[],constantPool=[],labelTable=[],this.vm=null;try{var t=this.parser.parse(e),r=this.codeGen.interpret(t);this.vm=new MVM(this.context,this.shaderManager,r,constantPool,labelTable,!0),this.vm.interpret(),alert("The Virtual Machine's final result is: "+window.MVM.dataStore[0])}catch(n){return alert("Error detected while rendering! See console for stack trace."),console.log(n),!1}return!0}};var sketchParse=function(){function e(){this.yy={}}var t=function(e,t,r,n){for(r=r||{},n=e.length;n--;r[e[n]]=t);return r},r=[1,8],n=[1,38],a=[1,18],s=[1,12],i=[1,19],o=[1,20],c=[1,21],l=[1,22],h=[1,23],u=[1,24],d=[1,25],f=[1,33],p=[1,34],g=[1,35],m=[1,36],v=[1,37],y=[1,26],k=[1,27],S=[1,28],P=[1,29],b=[1,30],E=[1,31],x=[1,32],O=[5,10,21,25,29,33,35,36,37,38,39,40,62,63,64,65,66,70,71,72,73,74,75,76],w=[1,42],A=[5,10,21,25,26,29,33,35,36,37,38,39,40,62,63,64,65,66,70,71,72,73,74,75,76],_=[2,76],L=[1,45],N=[5,10,21,25,26,29,33,34,35,36,37,38,39,40,62,63,64,65,66,70,71,72,73,74,75,76],M=[1,47],D=[1,48],I=[1,49],T=[1,50],R=[1,51],F=[5,10,21,22,25,26,29,33,34,35,36,37,38,39,40,42,43,44,45,46,62,63,64,65,66,68,70,71,72,73,74,75,76],U=[1,68],C=[1,53],G=[1,54],$=[1,55],B=[1,56],V=[1,57],Z=[1,58],q=[1,59],J=[1,60],z=[1,61],H=[1,62],X=[1,63],W=[1,64],j=[1,65],Y=[1,66],Q=[1,67],K=[2,82],ee=[1,69],te=[1,85],re=[25,62],ne=[5,10,16,21,22,24,25,26,29,33,34,35,36,37,38,39,40,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,68,70,71,72,73,74,75,76],ae=[22,24],se=[5,10,16,21,22,24,25,26,29,33,35,36,37,38,39,40,62,63,64,65,66,68,70,71,72,73,74,75,76],ie=[5,10,21,25,26,29,33,35,36,37,38,39,40,62,63,64,65,66,68,70,71,72,73,74,75,76],oe=[1,120],ce=[10,21,25,26,29,33,35,36,37,38,39,40,62,63,64,65,66,70,71,72,73,74,75,76],le=[2,80],he=[5,10,21,22,25,26,29,33,34,35,36,37,38,39,40,42,43,62,63,64,65,66,68,70,71,72,73,74,75,76],ue=[5,10,21,22,25,26,29,33,34,35,36,37,38,39,40,42,43,44,45,62,63,64,65,66,68,70,71,72,73,74,75,76],de=[5,10,21,22,25,26,29,33,34,35,36,37,38,39,40,62,63,64,65,66,68,70,71,72,73,74,75,76],fe=[21,25,62,63,64,65,66],pe=[22,24,26],ge=[19,25],me={trace:function(){},yy:{},symbols_:{error:2,start:3,program:4,EOF:5,declarations:6,"out-decl":7,"in-decl":8,statement:9,FUNCTION:10,declarator:11,declaration_list:12,func_return:13,body:14,param:15,ASSIGN:16,exp:17,semi:18,RETURN_TYPE:19,type:20,OPEN_PARENS:21,CLOSE_PARENS:22,param_list:23,COMMA:24,OPEN_BRACE:25,CLOSE_BRACE:26,statement_list:27,decl_list:28,"function":29,condition_statements:30,iteration_statements:31,jump_statements:32,IF:33,ELSE:34,WHILE:35,DO:36,FOR:37,CONTINUE:38,BREAK:39,RETURN:40,prim_expr:41,PLUS:42,MINUS:43,MULT:44,DIV:45,MODULO:46,OP_ADD_ASSIGNMENT:47,OP_SUB_ASSIGNMENT:48,OP_MULT_ASSIGNMENT:49,OP_DIV_ASSIGNMENT:50,OP_MOD_ASSIGNMENT:51,OP_INC:52,OP_DEC:53,OP_AND:54,OP_OR:55,OP_EQ:56,LT:57,GT:58,OP_NE:59,OP_LE:60,OP_GE:61,IDENTIFIER:62,NUMBER:63,TRUE:64,FALSE:65,NOT:66,init_list:67,SEMICOLON:68,declaration:69,VOID:70,INT:71,FLOAT:72,BOOL:73,POINT:74,LINE:75,POLYGON:76,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"FUNCTION",16:"ASSIGN",19:"RETURN_TYPE",21:"OPEN_PARENS",22:"CLOSE_PARENS",24:"COMMA",25:"OPEN_BRACE",26:"CLOSE_BRACE",29:"function",33:"IF",34:"ELSE",35:"WHILE",36:"DO",37:"FOR",38:"CONTINUE",39:"BREAK",40:"RETURN",42:"PLUS",43:"MINUS",44:"MULT",45:"DIV",46:"MODULO",47:"OP_ADD_ASSIGNMENT",48:"OP_SUB_ASSIGNMENT",49:"OP_MULT_ASSIGNMENT",50:"OP_DIV_ASSIGNMENT",51:"OP_MOD_ASSIGNMENT",52:"OP_INC",53:"OP_DEC",54:"OP_AND",55:"OP_OR",56:"OP_EQ",57:"LT",58:"GT",59:"OP_NE",60:"OP_LE",61:"OP_GE",62:"IDENTIFIER",63:"NUMBER",64:"TRUE",65:"FALSE",66:"NOT",68:"SEMICOLON",70:"VOID",71:"INT",72:"FLOAT",73:"BOOL",74:"POINT",75:"LINE",76:"POLYGON"},productions_:[0,[3,2],[3,1],[4,1],[4,2],[6,1],[6,1],[6,1],[7,5],[8,4],[8,2],[13,2],[13,0],[12,2],[12,3],[23,1],[23,3],[15,2],[14,2],[14,3],[14,3],[14,4],[9,2],[9,1],[9,1],[9,1],[9,1],[9,1],[30,5],[30,7],[31,5],[31,7],[31,9],[32,2],[32,2],[32,3],[32,2],[28,1],[28,1],[28,2],[28,2],[27,1],[27,2],[27,2],[17,1],[17,3],[17,3],[17,3],[17,3],[17,3],[17,3],[17,3],[17,3],[17,3],[17,3],[17,2],[17,2],[17,3],[17,3],[17,3],[17,3],[17,3],[17,3],[17,3],[17,3],[17,3],[41,1],[41,1],[41,1],[41,1],[41,2],[41,3],[41,5],[41,3],[41,3],[18,1],[18,0],[11,1],[69,1],[69,4],[67,1],[67,3],[67,0],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1]],performAction:function(e,t,r,n,a,s,i){var o=s.length-1;switch(a){case 1:return"undefined"!=typeof console?console.log("%j",s[o-1]):print(s[o-1]),s[o-1];case 2:return[];case 4:case 70:this.$=[s[o-1],s[o]];break;case 8:this.$={type:"function",arguments:[s[o-3],s[o-2],s[o-1],s[o]]};break;case 9:this.$={type:"variable-decl-assign",arguments:[s[o-3],s[o-1]]};break;case 10:this.$={type:"variable-decl",arguments:s[o-1]};break;case 11:case 15:this.$=s[o];break;case 12:this.$="void";break;case 13:this.$="";break;case 14:case 19:case 20:this.$=s[o-1];break;case 16:this.$=[s[o-2],s[o]];break;case 17:this.$=[s[o-1],s[o]];break;case 18:this.$="";break;case 21:this.$=[s[o-2],s[o-1]];break;case 28:this.$={type:"if",arguments:[s[o-2],s[o]]};break;case 29:this.$={type:"if-else",arguments:[s[o-4],s[o-2],s[o]]};break;case 30:this.$={type:"while",arguments:[s[o-2],s[o-1]]};break;case 31:this.$={type:"do-while",arguments:[s[o-5],s[o-2]]};break;case 32:this.$={type:"for",arguments:[s[o-6],s[o-4],s[o-2],s[o]]};break;case 35:this.$=[s[o-2],s[o-1]];break;case 39:case 40:case 42:case 43:this.$=[s[o-1],s[o]];break;case 45:this.$={type:"addition",arguments:[s[o-2],s[o]]};break;case 46:this.$={type:"subtraction",arguments:[s[o-2],s[o]]};break;case 47:this.$={type:"multiplication",arguments:[s[o-2],s[o]]};break;case 48:this.$={type:"division",arguments:[s[o-2],s[o]]};break;case 49:this.$={type:"modulo",arguments:[s[o-2],s[o]]};break;case 50:this.$={type:"add-assign",arguments:[s[o-2],s[o]]};break;case 51:this.$={type:"sub-assign",arguments:[s[o-2],s[o]]};break;case 52:this.$={type:"multi-assign",arguments:[s[o-2],s[o]]};break;case 53:this.$={type:"div-assign",arguments:[s[o-2],s[o]]};break;case 54:this.$={type:"mod-assign",arguments:[s[o-2],s[o]]};break;case 55:this.$={type:"increment",arguments:[s[o-1]]};break;case 56:this.$={type:"decrement",arguments:[s[o-1]]};break;case 57:this.$={type:"and",arguments:[s[o-2],s[o]]};break;case 58:this.$={type:"or",arguments:[s[o-2],s[o]]};break;case 59:this.$={type:"equality",arguments:[s[o-2],s[o]]};break;case 60:this.$={type:"less-than",arguments:[s[o-2],s[o]]};break;case 61:this.$={type:"greater-than",arguments:[s[o-2],s[o]]};break;case 62:this.$={type:"not-equal",arguments:[s[o-2],s[o]]};break;case 63:this.$={type:"less-than-or-equal ",arguments:[s[o-2],s[o]]};break;case 64:this.$={type:"greater-than-or-equal",arguments:[s[o-2],s[o]]};break;case 65:this.$={type:"assign",arguments:[s[o-2],s[o]]};break;case 66:this.$={type:"ident",arguments:e};break;case 67:this.$={type:"num",arguments:Number(e)};break;case 71:case 73:case 74:this.$=s[o-1];break;case 72:this.$=[s[o-4],s[o-2]];break;case 79:this.$=[s[o-3],s[o-1]];break;case 81:this.$=[s[o-2],s[o]]}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,10:r,14:11,15:9,17:10,20:16,21:n,25:a,29:s,30:13,31:14,32:15,33:i,35:o,36:c,37:l,38:h,39:u,40:d,41:17,62:f,63:p,64:g,65:m,66:v,70:y,71:k,72:S,73:P,74:b,75:E,76:x},{1:[3]},{5:[1,39],6:40,7:5,8:6,9:7,10:r,14:11,15:9,17:10,20:16,21:n,25:a,29:s,30:13,31:14,32:15,33:i,35:o,36:c,37:l,38:h,39:u,40:d,41:17,62:f,63:p,64:g,65:m,66:v,70:y,71:k,72:S,73:P,74:b,75:E,76:x},{1:[2,2]},t(O,[2,3]),t(O,[2,5]),t(O,[2,6]),t(O,[2,7]),{11:41,62:w},t(A,_,{18:44,16:[1,43],68:L}),t(N,_,{18:46,42:M,43:D,44:I,45:T,46:R,68:L}),t(N,[2,23]),t(N,[2,24]),t(N,[2,25]),t(N,[2,26]),t(N,[2,27]),{11:52,62:w},t(F,[2,44],{16:U,47:C,48:G,49:$,50:B,51:V,52:Z,53:q,54:J,55:z,56:H,57:X,58:W,59:j,60:Y,61:Q}),{7:75,8:74,9:73,10:r,14:11,15:9,17:10,20:16,21:n,24:K,25:a,26:ee,27:70,28:71,29:s,30:13,31:14,32:15,33:i,35:o,36:c,37:l,38:h,39:u,40:d,41:76,62:f,63:p,64:g,65:m,66:v,67:72,70:y,71:k,72:S,73:P,74:b,75:E,76:x},{21:[1,77]},{21:[1,78]},{9:79,14:11,17:10,21:n,25:a,29:s,30:13,31:14,32:15,33:i,35:o,36:c,37:l,38:h,39:u,40:d,41:17,62:f,63:p,64:g,65:m,66:v},{21:[1,80]},t(N,_,{18:81,68:L}),t(N,_,{18:82,68:L}),t([5,10,26,29,33,34,35,36,37,38,39,40,70,71,72,73,74,75,76],_,{41:17,17:83,18:84,21:n,25:te,62:f,63:p,64:g,65:m,66:v,68:L}),t(re,[2,83]),t(re,[2,84]),t(re,[2,85]),t(re,[2,86]),t(re,[2,87]),t(re,[2,88]),t(re,[2,89]),t([5,10,16,22,24,25,26,29,33,34,35,36,37,38,39,40,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,68,70,71,72,73,74,75,76],[2,66],{21:[1,86]}),t(ne,[2,67]),t(ne,[2,68]),t(ne,[2,69]),{21:n,25:te,41:87,62:f,63:p,64:g,65:m,66:v},t(ae,K,{41:76,17:88,67:89,21:n,25:te,62:f,63:p,64:g,65:m,66:v}),{1:[2,1]},t(O,[2,4]),{12:90,21:[1,91]},t(se,[2,77]),{17:92,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},t(ie,[2,10]),t(ne,[2,75]),t(N,[2,22]),{17:93,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:94,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:95,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:96,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:97,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},t(se,[2,17]),{17:98,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:99,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:100,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:101,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:102,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},t(F,[2,55]),t(F,[2,56]),{17:103,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:104,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:105,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:106,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:107,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:108,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:109,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:110,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:111,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},t(N,[2,18]),{7:75,8:74,9:113,10:r,14:11,15:9,17:10,20:16,21:n,25:a,26:[1,112],28:114,29:s,30:13,31:14,32:15,33:i,35:o,36:c,37:l,38:h,39:u,40:d,41:17,62:f,63:p,64:g,65:m,66:v,70:y,71:k,72:S,73:P,74:b,75:E,76:x},{7:118,8:117,9:73,10:r,14:11,15:9,17:10,20:16,21:n,25:a,26:[1,115],27:116,29:s,30:13,31:14,32:15,33:i,35:o,36:c,37:l,38:h,39:u,40:d,41:17,62:f,63:p,64:g,65:m,66:v,70:y,71:k,72:S,73:P,74:b,75:E,76:x},{24:oe,26:[1,119]},t(ce,[2,41]),t(ce,[2,37]),t(ce,[2,38]),t([10,21,22,24,25,26,29,33,35,36,37,38,39,40,42,43,44,45,46,62,63,64,65,66,68,70,71,72,73,74,75,76],le,{16:U,47:C,48:G,49:$,50:B,51:V,52:Z,53:q,54:J,55:z,56:H,57:X,58:W,59:j,60:Y,61:Q}),{17:121,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:122,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{35:[1,123]},{8:124,15:9,20:16,70:y,71:k,72:S,73:P,74:b,75:E,76:x},t(N,[2,33]),t(N,[2,34]),t(N,_,{18:125,42:M,43:D,44:I,45:T,46:R,68:L}),t(N,[2,36]),t([24,26],K,{67:72,41:126,21:n,25:te,62:f,63:p,64:g,65:m,66:v}),t(ae,K,{41:126,67:127,21:n,25:te,62:f,63:p,64:g,65:m,66:v}),t(ne,[2,70]),{22:[1,128],42:M,43:D,44:I,45:T,46:R},{22:[1,129],24:oe},{13:130,19:[1,131],25:[2,12]},{15:134,20:16,22:[1,132],23:133,70:y,71:k,72:S,73:P,74:b,75:E,76:x},t(A,_,{18:135,42:M,43:D,44:I,45:T,46:R,68:L}),t(he,[2,45],{44:I,45:T,46:R}),t(he,[2,46],{44:I,45:T,46:R}),t(ue,[2,47],{46:R}),t(ue,[2,48],{46:R}),t(de,[2,49],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,50],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,51],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,52],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,53],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,54],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,57],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,58],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,59],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,60],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,61],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,62],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,63],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,64],{42:M,43:D,44:I,45:T,46:R}),t(de,[2,65],{42:M,43:D,44:I,45:T,46:R}),t(N,[2,19]),t(ce,[2,42]),t([21,25,26,29,33,35,36,37,38,39,40,62,63,64,65,66],[2,43],{15:9,20:16,8:117,7:118,10:r,70:y,71:k,72:S,73:P,74:b,75:E,76:x}),t(N,[2,20]),{7:75,8:74,9:113,10:r,14:11,15:9,17:10,20:16,21:n,25:a,26:[1,136],28:114,29:s,30:13,31:14,32:15,33:i,35:o,36:c,37:l,38:h,39:u,40:d,41:17,62:f,63:p,64:g,65:m,66:v,70:y,71:k,72:S,73:P,74:b,75:E,76:x},t(ce,[2,39]),t(ce,[2,40]),t(ne,[2,73]),{21:n,25:te,41:137,62:f,63:p,64:g,65:m,66:v},{22:[1,138],42:M,43:D,44:I,45:T,46:R},{22:[1,139],42:M,43:D,44:I,45:T,46:R},{21:[1,140]},t(fe,_,{18:141,68:L}),t(N,[2,35]),t(pe,le),{22:[1,142],24:oe},t(ne,[2,71]),t(ne,[2,74]),{14:143,25:[1,144]},{20:145,70:y,71:k,72:S,73:P,74:b,75:E,76:x},t(ge,[2,13]),{22:[1,146],24:[1,147]},t(ae,[2,15]),t(ie,[2,9]),t(N,[2,21]),t(pe,[2,81]),{9:148,14:11,17:10,21:n,25:a,29:s,30:13,31:14,32:15,33:i,35:o,36:c,37:l,38:h,39:u,40:d,41:17,62:f,63:p,64:g,65:m,66:v},{9:149,14:11,17:10,21:n,25:a,29:s,30:13,31:14,32:15,33:i,35:o,36:c,37:l,38:h,39:u,40:d,41:17,62:f,63:p,64:g,65:m,66:v},{17:150,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},{17:151,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},t([5,10,16,21,22,24,25,26,29,33,34,35,36,37,38,39,40,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,70,71,72,73,74,75,76],_,{18:152,68:L}),t(A,[2,8]),{7:75,8:74,9:73,10:r,14:11,15:9,17:10,20:16,21:n,25:a,26:ee,27:70,28:71,29:s,30:13,31:14,32:15,33:i,35:o,36:c,37:l,38:h,39:u,40:d,41:17,62:f,63:p,64:g,65:m,66:v,70:y,71:k,72:S,73:P,74:b,75:E,76:x},{25:[2,11]},t(ge,[2,14]),{15:153,20:16,70:y,71:k,72:S,73:P,74:b,75:E,76:x},t(A,[2,28],{34:[1,154]}),t(N,[2,30]),{22:[1,155],42:M,43:D,44:I,45:T,46:R},t(fe,_,{18:156,42:M,43:D,44:I,45:T,46:R,68:L}),t(ne,[2,72]),t(ae,[2,16]),{9:157,14:11,17:10,21:n,25:a,29:s,30:13,31:14,32:15,33:i,35:o,36:c,37:l,38:h,39:u,40:d,41:17,62:f,63:p,64:g,65:m,66:v},t(N,_,{18:158,68:L}),{17:159,21:n,25:te,41:17,62:f,63:p,64:g,65:m,66:v},t(N,[2,29]),t(N,[2,31]),{22:[1,160],42:M,43:D,44:I,45:T,46:R},{9:161,14:11,17:10,21:n,25:a,29:s,30:13,31:14,32:15,33:i,35:o,36:c,37:l,38:h,39:u,40:d,41:17,62:f,63:p,64:g,65:m,66:v},t(N,[2,32])],defaultActions:{3:[2,2],39:[2,1],145:[2,11]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){function t(){var e;return e=p.lex()||d,"number"!=typeof e&&(e=r.symbols_[e]||e),e}var r=this,n=[0],a=[null],s=[],i=this.table,o="",c=0,l=0,h=0,u=2,d=1,f=s.slice.call(arguments,1),p=Object.create(this.lexer),g={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(g.yy[m]=this.yy[m]);p.setInput(e,g.yy),g.yy.lexer=p,g.yy.parser=this,"undefined"==typeof p.yylloc&&(p.yylloc={});var v=p.yylloc;s.push(v);var y=p.options&&p.options.ranges;"function"==typeof g.yy.parseError?this.parseError=g.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var k,S,P,b,E,x,O,w,A,_={};;){if(P=n[n.length-1],this.defaultActions[P]?b=this.defaultActions[P]:((null===k||"undefined"==typeof k)&&(k=t()),b=i[P]&&i[P][k]),"undefined"==typeof b||!b.length||!b[0]){var L="";A=[];for(x in i[P])this.terminals_[x]&&x>u&&A.push("'"+this.terminals_[x]+"'");L=p.showPosition?"Parse error on line "+(c+1)+":\n"+p.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[k]||k)+"'":"Parse error on line "+(c+1)+": Unexpected "+(k==d?"end of input":"'"+(this.terminals_[k]||k)+"'"),this.parseError(L,{text:p.match,token:this.terminals_[k]||k,line:p.yylineno,loc:v,expected:A})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+P+", token: "+k);switch(b[0]){case 1:n.push(k),a.push(p.yytext),s.push(p.yylloc),n.push(b[1]),k=null,S?(k=S,S=null):(l=p.yyleng,o=p.yytext,c=p.yylineno,v=p.yylloc,h>0&&h--);break;case 2:if(O=this.productions_[b[1]][1],_.$=a[a.length-O],_._$={first_line:s[s.length-(O||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(O||1)].first_column,last_column:s[s.length-1].last_column},y&&(_._$.range=[s[s.length-(O||1)].range[0],s[s.length-1].range[1]]),E=this.performAction.apply(_,[o,l,c,g.yy,b[1],a,s].concat(f)),"undefined"!=typeof E)return E;O&&(n=n.slice(0,-1*O*2),a=a.slice(0,-1*O),s=s.slice(0,-1*O)),n.push(this.productions_[b[1]][0]),a.push(_.$),s.push(_._$),w=i[n[n.length-2]][n[n.length-1]],n.push(w);break;case 3:return!0}}return!0}},ve=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,a;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(a.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var s in a)this[s]=a[s];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,r,n;this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if(r=this._input.match(this.rules[a[s]]),r&&(!t||r[0].length>t[0].length)){if(t=r,n=s,this.options.backtrack_lexer){if(e=this.test_match(r,a[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,a[n]),e!==!1?e:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},
stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,n){switch(r){case 0:break;case 1:break;case 2:break;case 3:return 73;case 4:return 39;case 5:return"CLEAR";case 6:return 38;case 7:return 36;case 8:return 34;case 9:return 65;case 10:return 72;case 11:return 37;case 12:return 10;case 13:return 33;case 14:return 75;case 15:return 71;case 16:return 66;case 17:return"NULL";case 18:return 74;case 19:return 76;case 20:return 40;case 21:return 64;case 22:return 70;case 23:return 35;case 24:return 25;case 25:return 26;case 26:return"OPEN_BRACKET";case 27:return"CLOSE_BRACKET";case 28:return 21;case 29:return 22;case 30:return 24;case 31:return"COLON";case 32:return 68;case 33:return 19;case 34:return 16;case 35:return 47;case 36:return 52;case 37:return 42;case 38:return 48;case 39:return 53;case 40:return 43;case 41:return 49;case 42:return 44;case 43:return 50;case 44:return 45;case 45:return 51;case 46:return 46;case 47:return 54;case 48:return 55;case 49:return 56;case 50:return 57;case 51:return 58;case 52:return 59;case 53:return 60;case 54:return 61;case 55:return"EXCL";case 56:return 5;case 57:return 63;case 58:return 62}},rules:[/^(?:\s+)/,/^(?:\/\/.*)/,/^(?:#.*)/,/^(?:bool\b)/,/^(?:break\b)/,/^(?:clear\b)/,/^(?:continue\b)/,/^(?:do\b)/,/^(?:else\b)/,/^(?:false\b)/,/^(?:float\b)/,/^(?:for\b)/,/^(?:function\b)/,/^(?:if\b)/,/^(?:Line\b)/,/^(?:int\b)/,/^(?:not\b)/,/^(?:null\b)/,/^(?:Point\b)/,/^(?:Polygon\b)/,/^(?:return\b)/,/^(?:true\b)/,/^(?:void\b)/,/^(?:while\b)/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?::)/,/^(?:;)/,/^(?:->)/,/^(?:=)/,/^(?:\+=)/,/^(?:\+\+)/,/^(?:\+)/,/^(?:-=)/,/^(?:--)/,/^(?:-)/,/^(?:\*=)/,/^(?:\*)/,/^(?:\/=)/,/^(?:\/)/,/^(?:%=)/,/^(?:%)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:\?=)/,/^(?:\?<)/,/^(?:\?>)/,/^(?:!=)/,/^(?:!>)/,/^(?:!<)/,/^(?:!)/,/^(?:$)/,/^(?:[0-9]+(\.[0-9]*)?)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58],inclusive:!0}}};return e}();return me.lexer=ve,e.prototype=me,me.Parser=e,new e}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=sketchParse,exports.Parser=sketchParse.Parser,exports.parse=function(){return sketchParse.parse.apply(sketchParse,arguments)},exports.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),process.exit(1));var t=require("fs").readFileSync(require("path").normalize(e[1]),"utf8");return exports.parser.parse(t)},"undefined"!=typeof module&&require.main===module&&exports.main(process.argv.slice(1)));var MVM=function(e,t,r,n,a,s){function i(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1],o=Math.sin(r*(Math.PI/180)),c=Math.cos(r*(Math.PI/180));s-=n,i-=a;var l=s*c-i*o,h=s*o+i*c;l+=n,h+=a;var u=[l,h];return u}var o,e=e,t=t,c=0,l=0;window.MVM.dataStore=[];var h=0,u=0,d=0,f=1,p=[],g=0;this.interpret=function(){var m=window.MVM.dataStore;o=r.length;for(var v=MVM.opCodes;o>l&&0==g;){c++;var y=r[l];switch(l++,y){case v.STOREG:var k=r[l];l++,h--;var S=m[h];p[k]=S,s&&console.log("STOREG: "+S+" "+k);break;case v.LOADG:var k=r[l];l++,m[h]=p[k],h++,s&&console.log("LOADG: "+S+" "+k);break;case v.STOREL:var P=r[l];l++,h--,m[u+P+2]=m[h],h++,s&&console.log("STOREL: "+m[h-1]+" "+P);break;case v.LOADL:var P=r[l];l++,m[h]=m[u+P+2],h++,s&&console.log("LOADL: "+m[h-1]+" "+P);break;case v.LOADC:var b=r[l];l++,m[h]=b,h++,s&&console.log("LOADC: "+b);break;case v.IADD:h--;var S=Math.floor(m[h]);h--;var E=Math.floor(m[h]),x=E+S;m[h]=x,h++,m.splice(h,1),s&&console.log("IADD: "+E+" + "+S+" = "+x);break;case v.ISUB:h--;var S=Math.floor(m[h]);h--;var E=Math.floor(m[h]),x=E-S;m[h]=x,h++,s&&console.log("ISUB: "+E+" - "+S+" = "+x);break;case v.IMUL:h--;var S=Math.floor(m[h]);h--;var E=Math.floor(m[h]),x=E*S;m[h]=x,h++,s&&console.log("IMUL: "+E+" * "+S+" = "+x);break;case v.IDIV:h--;var S=Math.floor(m[h]);h--;var E=Math.floor(m[h]),x=Math.floor(E/S);m[h]=x,h++,s&&console.log("IDIV: "+E+" / "+S+" = "+x);break;case v.IMOD:h--;var S=Math.floor(m[h]);h--;var E=Math.floor(m[h]),x=Math.floor(E%S);m[h]=x,h++,s&&console.log("IMOD: "+E+" % "+S+" = "+x);break;case v.FADD:h--;var S=m[h];h--;var E=m[h],x=E+S;m[h]=x,h++,s&&console.log("FADD: "+E+" + "+S+" = "+x);break;case v.FSUB:h--;var S=m[h];h--;var E=m[h];m[h]=E-S,h++,s&&console.log("FSUB: "+E+" - "+S+" = "+x);break;case v.FMUL:h--;var S=m[h];h--;var E=m[h],x=E*S;m[h]=x,h++,s&&console.log("FMUL: "+E+" * "+S+" = "+x);break;case v.FDIV:h--;var S=m[h];h--;var E=m[h],x=E/S;m[h]=x,h++,s&&console.log("FMUL: "+E+" / "+S+" = "+x);break;case v.FMOD:h--;var S=m[h];h--;var E=m[h],x=E%S;m[h]=x,h++,s&&console.log("FMUL: "+E+" / "+S+" = "+x);break;case v.NCMPEQ:h--;var S=m[h];h--;var E=m[h],x=E==S?1:0;m[h]=x,h++,s&&console.log("NCMPEQ: "+E+" == "+S+" = "+x);break;case v.NCMPLT:h--;var S=m[h];h--;var E=m[h],x=S>E?1:0;m[h]=x,h++,s&&console.log("NCMPLT: "+E+" < "+S+" = "+x);break;case v.NCMPGT:h--;var S=m[h];h--;var E=m[h],x=E>S?1:0;m[h]=x,h++,s&&console.log("NCMPLT: "+E+" > "+S+" = "+x);break;case v.JUMP:var k=a[r[l]];l=k,s&&console.log("JUMP: "+k);break;case v.JUMPT:var k=a[r[l]];h--;var S=m[h];x=1==S,x?l=r[l]:l++,s&&console.log("JUMPT: "+S+" "+x);break;case v.JUMPF:var k=a[r[l]];h--;var S=m[h],x=0==S;s&&console.log("JUMPF: "+S+" "+x),x?l=r[l]:l++;break;case v.CALL:var k=r[l];l++;var O=r[l];l++;for(var w=l,A=u,_=[],S=0;O>S;)h--,_[S]=m[h],S++;for(u=h,m[h]=A,h++,m[h]=w,h++;S>0;)S--,m[h]=_[S],h++;l=k,s&&console.log("CALL: "+k+" "+O);break;case v.RETURN:var L,N=r[l];N&&(L=m[h-1]);var w=m[u+f],M=u;N&&M++;var D=h-u;l=w,h=u,u=m[u+d],m[h]=L,h++,m.splice(M,D),s&&console.log("RETURN: "+O+" returnValue: "+L);break;case v.LNDRAW:h--;var I=m[h],T=n[I],R=T[0],F=T[1],U=T[2],C=T[3],G=T[4],$=T[5],B=T[6],V=T[7],Z=new Float32Array([G,$,0,B,V,0]),q=new Float32Array([R,F,U,C]),J=t.getProgram("square","square"),z=e.canvas.width,H=e.canvas.height;J.setDrawMode(Palette.Program.LINES),J.draw(Z,{width:[z],height:[H]},{color:q}),s&&console.log("LNDRAW: "+T);break;case v.PGDRAW:h--;var S,X=m[h],W=n[X],R=W[0],F=W[1],U=W[2],C=W[3],q=new Float32Array([R,F,U,C]),j=[];for(S=4;S<W.length;S+=2){var Y=[W[S],W[S+1]];j.push(Y)}var J=t.getProgram("square","square");J.setDrawMode(Palette.Program.POLYGON);var z=e.canvas.width,H=e.canvas.height;J.draw(j,{width:[z],height:[H]},{color:q}),s&&console.log("PGDRAW: "+W);break;case v.RENDER:g=1,s&&console.log("RENDER");break;case v.CLEAR:e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),s&&console.log("CLEAR");break;case v.EXIT:l=o,console.log("EXIT");break;case v.LOADIDX:var Q=r[l];l++;var K=r[l];l++;var ee=n[Q],te=ee[K];m[h]=te,h++,s&&console.log("LOADIDX: constant pool index "+Q+" array index: "+K);break;case v.SETIDX:var Q=r[l];l++;var K=r[l];l++;var ee=n[Q];h--;var te=m[h];ee[K]=te,s&&console.log("SETIDX: constant pool index "+Q+" array index: "+K);break;case v.LNTOPG:h--;var I=m[h];h--;for(var re=m[h],ne=n[I],ae=ne.slice(0),S=2,se=360/re,ie=4,oe=5,ce=6,le=7,he=8,ue=9;re>S;){var de=[ae[ie],ae[oe]],fe=[ae[ce],ae[le]],pe=i(de,fe,se);offSetx=ae[ie]-ae[ce],offSety=ae[oe]-ae[le],pe[0]-=offSetx,pe[1]-=offSety,ae[he]=pe[0],ae[ue]=pe[1],ie+=2,oe+=2,ce+=2,le+=2,he+=2,ue+=2,S++}var ge=r[l];l++,n[ge]=ae,s&&console.log("LNTOPG "+ae);break;case v.PTADD:h--;var me=m[h],ve=n[me];h--;var ye=m[h],ke=n[ye],ne=[0,1,0,1,ke[0],ke[1],ve[0],ve[1]],I=r[l];l++,n[I]=ne,s&&console.log("PTADD "+ne);break;case v.LNMUL:h--;var Se=m[h];h--;var I=m[h],ne=n[I];G=ne[4],$=ne[5],B=ne[6],V=ne[7];var Pe=B-G,be=V-$,Ee=Pe*Se-Pe,xe=be*Se-be,Oe=r[l];l++;var we=ne.slice(0);we[6]+=Ee,we[7]+=xe,we[0]=0,we[1]=1,we[2]=0,we[3]=1,n[Oe]=we,s&&console.log("LNMUL "+we)}m.splice(h,m.length-h),s&&console.log(JSON.stringify(m))}g&&render()},render=function(){g=0,window.requestAnimationFrame(window.mvm.interpret)}};MVM.opCodes={STOREG:0,LOADG:1,STOREL:2,LOADL:3,LOADC:4,IADD:5,ISUB:6,IMUL:7,IDIV:8,IMOD:9,FADD:10,FSUB:11,FMUL:12,FDIV:13,FMOD:14,LOADIDX:15,SETIDX:16,NCMPEQ:17,NCMPLT:18,NCMPGT:19,JUMP:20,JUMPT:21,JUMPF:22,CALL:23,RETURN:24,LNDRAW:25,PGDRAW:26,RENDER:27,CLEAR:28,PTADD:29,LNTOPG:30,LNMUL:31,EXIT:32};var LEAFNODES=["int","float","bool","void"],OPCODES={STOREG:0,LOADG:1,STOREL:2,LOADL:3,LOADC:4,IADD:5,ISUB:6,IMUL:7,IDIV:8,IMOD:9,FADD:10,FSUB:11,FMUL:12,FDIV:13,FMOD:14,LOADIDX:15,SETIDX:16,NCMPEQ:17,NCMPLT:18,NCMPGT:19,JUMP:20,JUMPT:21,JUMPF:22,CALL:23,RETURN:24,LNDRAW:25,PGDRAW:26,RENDER:27,CLEAR:28,PTADD:29,LNTOPG:30,LNMUL:31,PRINTST:32,PRINTS:33,EXIT:34},treeDepth=0,codeStore=[],constantPool=[],labelTable=[],Sketch=Sketch||{};Sketch.SketchGen=function(){var e=function(e){r.push(e)},t={program:function(e){interpretNode(e)},addition:function(t){interpretNode(t[0]),interpretNode(t[1]),e(MVM.opCodes.IADD)},subtraction:function(t){interpretNode(t[0]),interpretNode(t[1]),e(MVM.opCodes.ISUB)},multiplication:function(t){interpretNode(t[0]),interpretNode(t[1]),e(MVM.opCodes.IMUL)},division:function(t){interpretNode(t[0]),interpretNode(t[1]),e(MVM.opCodes.IDIV)},num:function(t){e(MVM.opCodes.LOADC),e(t)}},r=[];interpretNode=function(e){Array.isArray(e)?e.forEach(interpretNode):t[e.type](e.arguments)},this.interpret=function(e){return r=[],interpretNode({type:"program",arguments:e}),r}};var Palette=Palette||{};Palette.Manager=function(e){this.context=e,this.vertShaders={},this.fragShaders={},this.programs={},this.shaderFactory=new Palette.ShaderFactory(this)},Palette.Manager.prototype={addShader:function(e){this.shaderFactory.addShader(e)},draw:function(e,t,r,n,a){this.getProgram(e,t).draw(r,n,a)},getProgram:function(e,t){var r,n,a,s=this.getShaderName(e),i=this.getShaderName(t);return this.programs[s]=this.programs[s]||{},this.programs[s][i]=this.programs[s][i]||{},this.programs[s][i]instanceof Palette.Program||(r=e instanceof Palette.Shader?e:this.getShader(Palette.Shader.VS,s),n=t instanceof Palette.Shader?t:this.getShader(Palette.Shader.FS,i),this.programs[s][i]=new Palette.Program(this.context,r,n)),a=this.programs[s][i]},getShader:function(e,t){return e===Palette.Shader.VS?this.vertShaders[t]:this.fragShaders[t]},getShaderName:function(e){var t;return t=e instanceof Palette.Shader?e.name:e}},Palette.Manager.prototype.constructor=Palette.Manager,Palette.Program=function(e,t,r){this.context=e,this.vs=t,this.fs=r,this.program=null,this.compiled=!1,this.attrs={vs:{access:{},store:{},send:{}},fs:{access:{},store:{},send:{}}},this.drawMode=Palette.Program.TRIANGLES,this.linkProgram(),this.prepareAttrStores()},Palette.Program.prototype={draw:function(e,t,r){this.context.useProgram(this.program),t||(t={});var n=this.drawMode;if(null!==e)switch(this.drawMode){case Palette.Program.POLYGON:for(var a=earcut([e],!0),s=this.attrs.vs.access.vertexBuffer.itemSize,i=new Float32Array(a.indices.length*s),o=e[0].length,c=0;c<a.indices.length;c++){var l=a.indices[c];switch(o){case 3:i[s*c+2]=a.vertices[l*o+2];case 2:i[s*c+1]=a.vertices[l*o+1];case 1:i[s*c]=a.vertices[l*o]}}t.vertexBuffer=i,n=Palette.Program.TRIANGLES;break;default:t.vertexBuffer=e}this.generateSend(this.attrs.vs,t),this.generateSend(this.attrs.fs,r),this.passAttrstoProg(),this.context.drawArrays(n,0,this.attrs.vs.send.vertexBuffer.length/this.attrs.vs.access.vertexBuffer.itemSize)},restoreDefaultConfig:function(e){for(var t,r,n=0;2>n;n++){if(n){if(!e&Palette.Program.FS_MODE)continue;r=this.fs,t=this.attrs.fs}else{if(!e&Palette.Program.VS_MODE)continue;r=this.vs,t=this.attrs.vs}for(var a=r.attrs.length-1;a>=0;a--){var s=r.attrs[a],i=s[0];"buffer"==s[1]||"vertexAttrib"==s[1]?t.store[i]=null:"vertexAttrib"!=s[1]&&(t.store[i]=s[2])}}},setConfig:function(e,t){for(var r,n,a=0;2>a;a++){if(a){if(!e&Palette.Program.FS_MODE)continue;n=this.fs,r=this.attrs.fs}else{if(!e&Palette.Program.VS_MODE)continue;n=this.vs,r=this.attrs.vs}for(var s in r.access){var i=r.store[s];void 0!==t[s]&&(i=t[s])}}},linkProgram:function(){return this.compiled?!1:(this.compiled=!0,this.program=this.context.createProgram(),this.context.attachShader(this.program,this.vs.shader),this.context.attachShader(this.program,this.fs.shader),this.context.linkProgram(this.program),!0)},prepareAttrStores:function(){this.context.useProgram(this.program);for(var e,t,r=0;2>r;r++){r?(e=this.fs,t=this.attrs.fs):(e=this.vs,t=this.attrs.vs);for(var n=e.attrs.length-1;n>=0;n--){var a=e.attrs[n],s=a[0];t.access[s]=t.access[s]||{};var i=t.access[s];i.setFunction=Palette.Program.fetchSetter(this.context,a[1]),"vertexAttrib"==a[1]?(i.pointer=this.context.getAttribLocation(this.program,a[0]),this.context.enableVertexAttribArray(i.pointer),i.bufferName=a[2]):"buffer"==a[1]?(i.pointer=this.context.createBuffer(),i.itemSize=a[2]):i.pointer=this.context.getUniformLocation(this.program,a[0]),i.type=a[1]}}this.restoreDefaultConfig(Palette.Program.BOTH_MODE)},passAttrstoProg:function(){for(var e,t=0;2>t;t++){e=t?this.attrs.fs:this.attrs.vs;for(var r in e.access){var n=e.send[r],a=e.access[r];if("mat"==a.type.substr(0,3))a.setFunction(a.pointer,this.context.FALSE,n);else if("vertexAttrib"==a.type){var s=this.attrs.vs.access[a.bufferName];a.setFunction(a,s)}else"buffer"==a.type?a.setFunction(a,n):a.setFunction(a.pointer,n)}}},setDrawMode:function(e){this.drawMode=e},generateSend:function(e,t){var r;for(var n in e.access)r=t[n]?t[n]:e.store[n],e.send[n]=r}},Palette.Program.fetchSetter=function(e,t){var r,n=function(e){return function(t,r){e(t,r[0])}},a=function(e){return function(t,r){e(t,r[0],r[1])}},s=function(e){return function(t,r){e(t,r[0],r[1],r[2])}},i=function(e){return function(t,r){e(t,r[0],r[1],r[2],r[3])}};switch(t){case"float":return n(e.uniform1f.bind(e));case"float[]":return e.uniform1fv.bind(e);case"int":return n(e.uniform1i.bind(e));case"int[]":return e.uniform1iv.bind(e);case"vec2":return a(e.uniform2f.bind(e));case"vec2[]":return e.uniform2fv.bind(e);case"ivec2":return a(e.uniform2i.bind(e));case"ivec2[]":return e.uniform2iv.bind(e);case"vec3":return s(e.uniform3f.bind(e));case"vec3[]":return e.uniform3fv.bind(e);case"ivec3":return s(e.uniform3i.bind(e));case"ivec3[]":return e.uniform3iv.bind(e);case"vec4":return i(e.uniform4f.bind(e));case"vec4[]":return e.uniform4fv.bind(e);case"ivec4":return i(e.uniform4i.bind(e));case"ivec4[]":return e.uniform4iv.bind(e);case"mat2":return e.uniformMatrix2fv.bind(e);case"mat3":return e.uniformMatrix3fv.bind(e);case"mat4":return e.uniformMatrix4fv.bind(e);case"texture":return alert("You're on your own, kid."),null;case"vertexAttrib":return r=function(t,r){e.bindBuffer(e.ARRAY_BUFFER,r.pointer),e.vertexAttribPointer(t.pointer,r.itemSize,e.FLOAT,!1,0,0)},r.bind(e);case"buffer":return r=function(t,r){e.bindBuffer(e.ARRAY_BUFFER,t.pointer),e.bufferData(e.ARRAY_BUFFER,r,e.DYNAMIC_DRAW)},r.bind(e);default:return alert("Not gonna lie - you really messed up. I can't pass "+t+" onto the shader."),null}},Palette.Program.NONE_MODE=0,Palette.Program.VS_MODE=1,Palette.Program.FS_MODE=2,Palette.Program.BOTH_MODE=3,Palette.Program.POINTS=0,Palette.Program.LINES=1,Palette.Program.LINE_LOOP=2,Palette.Program.LINE_STRIP=3,Palette.Program.TRIANGLES=4,Palette.Program.TRIANGLE_STRIP=5,Palette.Program.TRIANGLE_FAN=6,Palette.Program.POLYGON=7,Palette.Program.prototype.constructor=Palette.Program,Palette.Shader=function(e,t,r,n,a){this.name=t,this.type=r,this.context=e,this.attrs=a,this.shader=null,this.compiled=!1,this.bakeShader(n)},Palette.Shader.prototype={bakeShader:function(e){if(this.compiled)return null;switch(this.compiled=!0,this.type){case Palette.Shader.VS:this.shader=this.context.createShader(this.context.VERTEX_SHADER);break;case Palette.Shader.FS:this.shader=this.context.createShader(this.context.FRAGMENT_SHADER);break;default:return!1}return this.context.shaderSource(this.shader,e),this.context.compileShader(this.shader),this.context.getShaderParameter(this.shader,this.context.COMPILE_STATUS)?!0:(alert("An error occurred compiling the shaders: "+this.context.getShaderInfoLog(this.shader)),!1)}},Palette.Shader.VS=0,Palette.Shader.FS=1,Palette.Shader.LIST=2,Palette.Shader.prototype.constructor=Palette.Shader,Palette.ShaderFactory=function(e){this.that=this,this.manager=e,this.downloadInProgress=!1},Palette.ShaderFactory.prototype={addShader:function(e){var t,r;switch(this.establishType(e)){case Palette.ShaderFactory.SOURCE_OBJECT:t=e;case Palette.ShaderFactory.JSON:t=t||JSON.parse(e),r=this.createShaderObject(t);break;case Palette.ShaderFactory.SHADER_OBJECT:r=e;break;case Palette.ShaderFactory.URL:this.downloadFromURL(e);break;default:throw new Error("Not a valid type of shader.")}r&&this.registerShader(r)},createShaderObject:function(e){switch(e.type){case Palette.Shader.VS:case Palette.Shader.FS:return new Palette.Shader(this.manager.context,e.name,e.type,e.src,e.attrs);case Palette.Shader.LIST:for(var t=e.content.length-1;t>=0;t--)this.addShader(e.content[t]);break;default:throw new Error("Tried to create an illegal class of shader.")}},downloadFromURL:function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.onload=function(){console.log(that),that.addShader(t.response),that.downloadInProgress=!1},that.downloadInProgress=!0,t.send()},establishType:function(e){var t=-1;return e instanceof Palette.Shader?t=Palette.ShaderFactory.SHADER_OBJECT:void 0!=e.type&&void 0!=e.name&&(e.content||e.src)?t=Palette.ShaderFactory.SOURCE_OBJECT:this.isJSON(e)?t=Palette.ShaderFactory.JSON:console.log("PALETTE: BAD SHADER. MALFORMED JSON OR BAD OBJECT SHAPE."),t},isJSON:function(e){try{return JSON.parse(e),!0}catch(t){return!1}},isString:function(e){return"string"==typeof e||e instanceof String},registerShader:function(e){switch(e.type){case Palette.Shader.VS:this.manager.vertShaders[e.name]=this.manager.vertShaders[e.name]||e;break;case Palette.Shader.FS:this.manager.fragShaders[e.name]=this.manager.fragShaders[e.name]||e;break;default:throw new Error("Tried to register an illegal class of shader.")}}},Palette.ShaderFactory.SOURCE_OBJECT=0,Palette.ShaderFactory.JSON=1,Palette.ShaderFactory.URL=2,Palette.ShaderFactory.SHADER_OBJECT=3,Palette.ShaderFactory.prototype.constructor=Palette.ShaderFactory,module.exports=earcut;